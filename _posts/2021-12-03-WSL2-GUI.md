---
layout: post
title: "WSL2 install"
date: 2021-12-03
excerpt: "wsl2 & docker install ."
tags: [Linux, WSL2, Windows 10]
comments: false
---

##### WSL2 安装

```powershell
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
Restart-Computer
```

##### 下载安装

[wsl_update_x64.msi](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)

```powershell
wsl --set-default-version 2
```

##### WSL2 配置

```shell
sudo sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list
sudo sed -i 's/security.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list
sudo apt update
sudo apt install net-tools -y
sudo apt install libreoffice -y
fc-list :lang=zh-cn
sudo locale-gen zh_CN.UTF-8
```

##### 安装docker

```shell
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
# ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --containerd=/run/containerd/containerd.sock
sudo vim /lib/systemd/system/docker.service
# DOCKER_OPTS="-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock"
sudo vim /etc/default/docker
sudo service docker start

sudo docker run -d --restart always -p 3306:3306 -e MYSQL_ROOT_PASSWORD=masterA@#1 mysql:5.7
sudo docker exec -it eba274f617d6 /bin/bash
mysql -uroot -p
alter user 'root'@'%' identified with mysql_native_password by 'masterA@#1';
grant all privileges on *.* to 'root'@'%';
quit;

sudo docker run -d --restart always -p 6379:6379 redis:5
```

##### root远程登录
```shell
# 修改root密码
sudo passwd root
# 测试root登录
su root
# Port 22
# ListenAddress 0.0.0.0
# PermitRootLogin yes
# PasswordAuthentication yes
sudo vim /etc/ssh/sshd_config
sudo apt remove openssh-server -y
sudo apt install openssh-server -y
sudo service ssh --full-restart
```

##### Recommended Apps
- draw.io
- postman
- IDEA
- ~~DBeaver~~
- ~~Sourcetree~~
- Adobe Reader
- Snipaste
- LICEcap
- Edge
- Thunderbird
